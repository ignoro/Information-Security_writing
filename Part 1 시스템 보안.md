# CPU
## CPU의 정의
입력장치로부터 자료를 받아 연산 후 결과를 출력 장치로 전송하는 과정을 제어하는 핵심 장치 (연산, 레지스터, 제어, 버스), 기억 장치 (레지스터, 캐시, 주기억 장치, 보조기억 장치)

## CPU 구성요소
1. __ALU(연산장치)__ : 산술연산, 논리연산
2. __레지스터__ : 소규모 데이터 중간 결과를 기억해두는 고속 영역
3. __Control Unit(제어장치)__ : 명령어 해석, 제어신호 발생
4. __내부 CPU 버스__ : ALU 레지스터간의 데이터 이동

## CPU 명령 실행 주기
1. __인출(Instruction Fetch)__ : 메모리 데이터를 로드하여 레지스터에 적재
2. __간접(Indrection)__ : 간접주소 방식 채택 경우 - CPU가 메모리 참조시 메모리 주소를 참조
3. __실행(Execution)__ : 명령, 데이터 > 산술, 논리연산 수행
4. __인터럽트(Interupt)__ : 예기치않은 문제 발생시에도 업무처리가능 하게 하는 기능

# 레지스터 
## 레지스터 정의
컴퓨터의 프로세서 내에서 자료를 보관하는 아주 빠른 기억 장소이다.
일반적으로 현재 계산을 수행중인 값을 저장하는데 사용된다.
대부분의 현대 프로세서는 메인 메모리에서 레지스터로 데이터를 옮겨와 데이터를 처리한 후 그 내용을 다시 레지스터에서 메인 메모리로 저장하는 로드-스토어 설계를 사용하고 있다.

레지스터는 메모리 계층의 최상위에 위치하며, 가장 빠른 속도로 접근 가능한 메모리이다.
최신 프로세서에서 레지스터는 대개 레지스터 파일로 구현되지만, 과거에는 플립플롭, 마그네틱 코어, 박막 필름 메모리 등으로 구현되기도 했다.

컴퓨터내에 메모리 장치와 달리 CPU내의 임시 저장장소라고 생각하면 된다.
CPU내의 작업대라고 하면 되는데 레지스터 종류는 참으로 많이 있다.

# 레지스터 종류
- __프로그램 계수기(PC, Program Counter)__ : 다음에 실행할 명령어(instruction)의 주소를 가지고 있다.
- __명령어 레지스터(IR)__ : 주기억장치에 접근하기 위한 주기억 장치 주소 기억 | 현재 수행 중인 명령어를 가지고 있다.
- __메모리 주소 레지스터(MAR)__ : 주기억장치에 접근하기 위한 주기억장치 주소 기억 | 메모리로부터 읽어오거나 메모리에 쓰기 위한 주소를 가지고 있다.
- __메모리 버퍼 레지스터(MBR)__ : 주기억 장치 입/출력 자료 기억 | 메모리로부터 읽어온 데이터 또는 메모리에 써야할 데이터를 가지고 있다.
- __입출력 주소 레지스터(I/O AR)__ : 입출력 장치에 따른 입출력 모듈의 주소를 가지고 있다.
- __입출력 버퍼 레지스터(I/O BR)__ : 입출력 모듈과 프로세서 간의 데이터 교환을 위해 사용된다.

# 버스
## 버스 정의

## 버스 종류(입출력 영향을 끼침)
- __데이터 버스__ : 데이터 전송 용도
- __주소 버스__ : 기억장소 위치, 식별
- __제어 버스__ : CPU, 기억장치, I/O 장치사이의 제어신호 전송

# 기억장치
## 기억장치 계층구조
| 레지스터 | | 기억장치 용량 | 장치비용 | 속도 |
| --- | --- | --- | --- | --- |
| 캐시 | | 작음 | 큼 | 빠름 |
| 주기억장치 | | | | |
| 보조기억장치 | | 큼 | 작음 | 느림 |

# 캐시메모리
## 캐시메모리 정의
CPU와 주기억장치 속도차이 극복을 위한 버퍼 메모리(기억장치)

## 캐시메모리 사상방식
1. __직접사상(Direct Mapping)__ : Main Memory를 어려구역으로 분할하여 캐시슬롯과 직접 매핑
2. __집합 연관사상(Set Associate Mapping)__ : 직접 + 연관 방법 메모리를 세트(블록)으로 분할하여 매핑
3. __연관 사상(Sssciate Mapping)__ : Main Memory 블록들이 캐시 슬롯에 어느곳이든 적재 가능

## 캐시메모리 관리 방식(CPU가 원하는 데이터가 캐시메모리에 적재하도록 관리)
(호출기법)
1. __Demand Fetch__ : 필요시 캐시 인출
2. __Pre-Fetch__ : 예상되는 데이터를 미리 패치
(교체기법)
silver-liq9118.tistory.com

## 캐시메모리 교체 알고리즘
1. __FIFO(First In Frist Out)__ : 가장 오래 있었던 Page 교체 / 자주 사용되는 페이지가 교체될 수 있음.
2. __LFU(Least Frequently Used)__ : 가장 사용횟수가 적은 Page 교체 / 가장 새로 들어온 페이지 교체될 수 있음.
3. __LRU(Least Recently Used)__ : 가장 오랫동안 사용되지 않은 Page 교체 / 오버헤드 우려
4. __NUR(Not User Recently)__ : 미사용 Page 교체 (참조/수정비트 사용)
5. __SCR(Second Chance Replacement)__ : 최초 참조 비트 1, 1->0 두번 기회

### 페이지교체시 문제점
Page Fault(페이지부재), DemadPaging, Thrashing(부재가 너무 빈번하여 프로세스 수행보다 페이지 교체 시간소요가 더 소모됨)

# 가상메모리(Virtual Memory)
## 가상메모리 정의
Virtual Address Space 사용, 물리적 메모리보다 더 큰용량 제공
가상 메모리 관리 단위 (페이지 VS 세그먼트) : 비연속 할당
페이지 : 동일한크기의 최소 논리 분할 단 위/ 내부단편화
세그먼트 : 용도별로 논리적 단위로 나눔 / 외부단편화

연속할당 : 고정분할, 가변 분할

# I/O 인터페이스 (주기억장치, 보조기억장치 입출력)
1. CPU 경유 : 프로그램에 의한 I/O, 인터럽트에 의한 I/O
  - 프로그램에 의한 I/O : CPU가 주변 장치를 연속 감시하는 Polling 방식
  - 인터럽트에 의한 I/O : 인터럽트 요청 감지시 수행작업을 중시
2. CPU 비경유 : DMA(Direct Memory Access Controller), Channel I/O
  - DMA : 메모리와 주변장치를 직접 관리, 속도 빠름 (Cycle Stealing: CPU 사용하지 않는 버스 점유, Brust Mode: 점유)
  - 채널 I/O (I/O Processor) : I/O장치의 복잡함으로 DMA 한계를 보완하여 별도 전용 처리기능 프로세서 탑재
      1. Multipleer : 저속장치, 시분할 방식
http://captech.tistory.com/6 / https://kkomii22.tistory.com/138#google_vignette
